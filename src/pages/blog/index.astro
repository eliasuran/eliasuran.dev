---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";
import Posts from "../../components/posts.astro";
import type { Post } from "../../types/post";

const posts = await getCollection(
  "posts",
  ({ data }) => data.published === true,
);
---

<BaseLayout
  title="Blogg - eliasuran.dev"
  desc="Mine blogg posts (ikke veldig aktiv)"
>
  {
    posts
      .slice()
      .sort(
        (a, b) =>
          new Date(b.data.date).getTime() - new Date(a.data.date).getTime(),
      )
      .map((post) => <Posts data={post.data} slug={post.slug} />)
  }
</BaseLayout>
